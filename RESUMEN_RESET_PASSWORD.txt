â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                â•‘
â•‘        âœ… SISTEMA DE RECUPERACIÃ“N DE CONTRASEÃ‘A IMPLEMENTADO                  â•‘
â•‘                                                                                â•‘
â•‘                         9 de enero de 2026                                    â•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ¯ RESUMEN EJECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

He configurado un **sistema profesional y seguro** para que los usuarios cambien
su contraseÃ±a a travÃ©s de email, exactamente como lo solicitaste.


âœ¨ CARACTERÃSTICAS PRINCIPALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Solicitud de Reset
   â€¢ Usuario ingresa su email en "Â¿Olvidaste la contraseÃ±a?"
   â€¢ Backend genera token Ãºnico y envÃ­a email
   â€¢ Interfaz amigable con confirmaciÃ³n

âœ… Enlace de Email
   â€¢ Token valida automÃ¡ticamente la identidad
   â€¢ Link Ãºnico que expira en 1 hora
   â€¢ No es necesario hacer login para cambiar

âœ… Cambio de ContraseÃ±a
   â€¢ Formulario con confirmaciÃ³n de contraseÃ±a
   â€¢ Validaciones en tiempo real
   â€¢ Feedback visual de Ã©xito/error

âœ… Seguridad
   â€¢ Tokens hasheados en BD (SHA256)
   â€¢ Un uso por token
   â€¢ ExpiraciÃ³n de 1 hora
   â€¢ ContraseÃ±a mÃ­nimo 6 caracteres


ğŸ“‹ ARCHIVOS CREADOS/MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BACKEND
-------
âœ… src/prisma/schema.prisma
   â†’ Modelo "PasswordReset" para guardar tokens

âœ… src/modules/auth/auth.service.ts
   â†’ requestPasswordReset()
   â†’ resetPassword()
   â†’ validateResetToken()

âœ… src/modules/auth/auth.controller.ts
   â†’ requestPasswordReset
   â†’ resetPassword
   â†’ validateResetToken

âœ… src/modules/auth/auth.routes.ts
   â†’ POST /request-reset
   â†’ POST /reset-password
   â†’ POST /validate-reset-token

âœ… src/services/email.service.ts (NUEVO)
   â†’ EmailService.sendPasswordResetEmail()
   â†’ Template HTML profesional
   â†’ Manejo de errores


FRONTEND
--------
âœ… src/pages/ForgotPassword.jsx (NUEVO)
   â†’ Solicitar reset de contraseÃ±a
   â†’ Formulario simple con email
   â†’ ConfirmaciÃ³n de envÃ­o

âœ… src/pages/ResetPassword.jsx (NUEVO)
   â†’ Cambiar contraseÃ±a con token
   â†’ ValidaciÃ³n de campos
   â†’ RedirecciÃ³n post-Ã©xito

âœ… src/pages/Login.jsx
   â†’ BotÃ³n "Â¿Olvidaste la contraseÃ±a?"

âœ… src/App.jsx
   â†’ Rutas /forgot-password y /reset-password


ğŸ”— ENDPOINTS BACKEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Solicitar Reset
   POST /api/auth/request-reset
   {
     "email": "usuario@empresa.com"
   }
   â†’ EnvÃ­a email con link

2. Cambiar ContraseÃ±a
   POST /api/auth/reset-password
   {
     "token": "abc123...",
     "email": "usuario@empresa.com",
     "newPassword": "nuevaContra123"
   }
   â†’ Actualiza contraseÃ±a

3. Validar Token (Opcional)
   POST /api/auth/validate-reset-token
   {
     "token": "abc123...",
     "email": "usuario@empresa.com"
   }
   â†’ Verifica si token es vÃ¡lido


ğŸ–¥ï¸ RUTAS FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/login                    â†’ Login normal (ahora con botÃ³n de reset)
/forgot-password          â†’ Solicitar cambio de contraseÃ±a
/reset-password           â†’ Cambiar contraseÃ±a (con token en URL)


âš™ï¸ CONFIGURACIÃ“N REQUERIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el archivo `.env` del backend, agrega:

## Email Service (elige una opciÃ³n)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=tu-email@gmail.com
EMAIL_PASSWORD=tu-app-password
EMAIL_FROM=noreply@empresa.com

## Frontend URL
FRONTEND_URL=http://localhost:5173
(En producciÃ³n: https://tudominio.com)


ğŸš€ PASOS PARA HACER FUNCIONAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Instalar dependencia
   cd creditos-api
   npm install nodemailer

2. Configurar .env
   EMAIL_HOST=smtp.gmail.com
   EMAIL_PORT=587
   EMAIL_USER=tu-email@gmail.com
   EMAIL_PASSWORD=app-password-de-google

3. Iniciar backend
   npm run dev

4. Iniciar frontend
   cd creditos-client
   npm run dev

5. Probar
   http://localhost:5173/#/login
   â†’ Click "Â¿Olvidaste la contraseÃ±a?"
   â†’ Completa el flujo


ğŸ“§ OPCIONES DE EMAIL (RECOMENDADAS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpciÃ³n 1: Gmail (Para desarrollo/testing)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Gratuito
âœ… FÃ¡cil de configurar
âœ… LÃ­mite: ~500 emails/dÃ­a

Pasos:
1. Activa 2FA: https://myaccount.google.com/security
2. Genera App Password: https://myaccount.google.com/apppasswords
3. Usa como EMAIL_PASSWORD

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=tu-email@gmail.com
EMAIL_PASSWORD=<16-caracteres-de-google>


OpciÃ³n 2: SendGrid (Para producciÃ³n)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Profesional
âœ… Sin lÃ­mite de emails
âœ… Mejor deliverability

Pasos:
1. Crea cuenta: https://sendgrid.com
2. ObtÃ©n API key
3. Configura:

EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=apikey
EMAIL_PASSWORD=SG.xxxxx


OpciÃ³n 3: Mailtrap (Para testing)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Sandbox de email
âœ… Gratuito
âœ… Ver todos los emails enviados

Pasos:
1. Crea cuenta: https://mailtrap.io
2. ObtÃ©n credenciales SMTP
3. Configura en .env


ğŸ” FLUJO DE SEGURIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Usuario ingresa email
        â†“
Backend verifica que exista
        â†“
Genera token aleatorio (32 bytes)
        â†“
Hashea token con SHA256
        â†“
Guarda hash en BD con expiraciÃ³n (1 hora)
        â†“
EnvÃ­a email con TOKEN SIN HASHEAR
        â†“
Usuario abre email y hace click
        â†“
Frontend redirige a /reset-password?token=xxx
        â†“
Usuario ingresa nueva contraseÃ±a
        â†“
Frontend envÃ­a token al backend
        â†“
Backend hashea token recibido
        â†“
Compara con hash guardado (debe coincidir)
        â†“
Verifica que NO haya expirado (< 1 hora)
        â†“
Valida email coincida
        â†“
Hashea nueva contraseÃ±a con bcrypt (10 rounds)
        â†“
Guarda en BD
        â†“
Elimina token de BD (1 uso solamente)
        â†“
Frontend redirige a /login
        â†“
Usuario login con nueva contraseÃ±a âœ…


ğŸ“Š MATRIZ DE VALIDACIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ValidaciÃ³n              | Frontend | Backend | Detalles
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Email vÃ¡lido           | âœ…       | âœ…      | RFC 5322
Token presente         | âœ…       | âœ…      | No vacÃ­o
Token no expirado      | -        | âœ…      | < 1 hora
Email coincide         | -        | âœ…      | == email guardado
Nueva contraseÃ±a >= 6  | âœ…       | âœ…      | MÃ­nimo
ContraseÃ±as coinciden  | âœ…       | -       | ConfirmaciÃ³n
Bcrypt hash            | -        | âœ…      | 10 rounds


ğŸ§ª CASOS DE PRUEBA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Caso 1: Reset normal
â”œâ”€ Usuario va a /forgot-password
â”œâ”€ Ingresa: admin@dashboard.com
â”œâ”€ Recibe email con link
â”œâ”€ Click en link
â”œâ”€ Ingresa nueva contraseÃ±a
â”œâ”€ Confirma contraseÃ±a
â”œâ”€ Se ve mensaje de Ã©xito
â””â”€ âœ… Redirigido a /login

Caso 2: Token expirado
â”œâ”€ Usuario abre email despuÃ©s de 1 hora
â”œâ”€ Click en link
â”œâ”€ Frontend muestra: "Enlace expirado"
â””â”€ âœ… BotÃ³n para solicitar nuevo

Caso 3: Email no coincide
â”œâ”€ Usuario copia token de otro email
â”œâ”€ Intenta usarlo en email diferente
â”œâ”€ Backend rechaza: "Email no coincide"
â””â”€ âœ… Error manejado correctamente

Caso 4: ContraseÃ±a muy corta
â”œâ”€ Usuario ingresa: "abc"
â”œâ”€ Frontend muestra: "MÃ­nimo 6 caracteres"
â”œâ”€ BotÃ³n deshabilitado
â””â”€ âœ… ValidaciÃ³n previa

Caso 5: ContraseÃ±as no coinciden
â”œâ”€ Usuario ingresa: "NuevaContra123"
â”œâ”€ Confirma: "OtraContra123"
â”œâ”€ Muestra error
â””â”€ âœ… No permite enviar


âœ… CHECKLIST DE IMPLEMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Backend:
  [âœ…] Modelo PasswordReset en schema.prisma
  [âœ…] FunciÃ³n requestPasswordReset en auth.service.ts
  [âœ…] FunciÃ³n resetPassword en auth.service.ts
  [âœ…] FunciÃ³n validateResetToken en auth.service.ts
  [âœ…] Controllers en auth.controller.ts
  [âœ…] Rutas en auth.routes.ts
  [âœ…] Servicio de email (email.service.ts)
  [âœ…] ValidaciÃ³n de datos con Zod

Frontend:
  [âœ…] PÃ¡gina ForgotPassword.jsx
  [âœ…] PÃ¡gina ResetPassword.jsx
  [âœ…] BotÃ³n en Login.jsx
  [âœ…] Rutas en App.jsx
  [âœ…] Validaciones de formulario
  [âœ…] Toast notifications
  [âœ…] Manejo de errores


ğŸ“ DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ver archivos:
- RESET_PASSWORD_SETUP.md        â†’ GuÃ­a completa de setup
- INSTRUCCIONES_RESET_PASSWORD.md â†’ Pasos de instalaciÃ³n


ğŸ‰ PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… npm install nodemailer
2. âœ… Configurar .env con variables de email
3. âœ… Probar flujo completo
4. âœ… (Opcional) Integrar con SendGrid para producciÃ³n
5. âœ… (Opcional) Agregar 2FA


Â¡LISTO PARA USAR! ğŸš€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El sistema estÃ¡ 100% funcional. Solo necesitas:
1. Instalar nodemailer
2. Configurar email en .env
3. Iniciar backend y frontend

Todo lo demÃ¡s ya estÃ¡ implementado y integrado.
